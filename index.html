<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WELCOME TO MY Calculator</title>
  <style>
    :root{
      --bg:#0f1724;
      --panel:#0b1220;
      --accent:#7c5cff;
      --glass: rgba(255,255,255,0.03);
      --muted: rgba(255,255,255,0.6);
      --glass-2: rgba(255,255,255,0.02);
      --success: #34d399;
      --danger: #fb7185;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      display:grid;
      place-items:center;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(124,92,255,0.12), transparent),
                  radial-gradient(900px 400px at 90% 90%, rgba(52,211,153,0.06), transparent),
                  var(--bg);
      color:white;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:32px;
    }

    .calculator{
      width:360px;
      max-width:95vw;
      background: linear-gradient(180deg,var(--panel), rgba(255,255,255,0.02));
      border-radius:20px;
      padding:18px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.03);
    }

    .top-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:8px;
    }

    .brand{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .logo{
      width:46px;height:46px;border-radius:12px;
      background: linear-gradient(135deg,var(--accent), #2dd4bf);
      display:grid;place-items:center;font-weight:700;
      box-shadow: 0 6px 18px rgba(124,92,255,0.18);
      transform:translateZ(0);
    }

    .title{
      line-height:1;
    }
    .title h1{font-size:14px;margin:0}
    .title p{font-size:11px;margin:0;color:var(--muted)}

    .modes{
      display:flex;gap:8px;align-items:center;
    }

    .mode-btn{
      background:var(--glass);
      border-radius:10px;padding:6px 8px;font-size:13px;border:1px solid var(--glass-2);cursor:pointer;
    }

    .display{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;padding:16px;min-height:86px;display:flex;flex-direction:column;justify-content:center;
      margin-bottom:14px;border:1px solid rgba(255,255,255,0.02);
    }

    .expr{font-size:18px;color:rgba(255,255,255,0.55);text-align:right;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .result{font-size:32px;font-weight:600;text-align:right;margin-top:6px}

    .pad{
      display:grid;grid-template-columns: repeat(4,1fr);gap:12px;
    }

    button.key{
      height:56px;border-radius:12px;border:0;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
      box-shadow: 0 6px 14px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      font-size:18px;color:inherit;cursor:pointer;transition:transform .08s ease, box-shadow .08s;
    }
    button.key:active{transform:translateY(2px);}

    .key.op{background:linear-gradient(180deg, rgba(124,92,255,0.14), rgba(124,92,255,0.08)); box-shadow: 0 8px 20px rgba(124,92,255,0.12);}
    .key.eq{grid-column: span 2;background: linear-gradient(180deg,var(--accent), #5a3cff); color:white; font-weight:700;}
    .key.clear{background:linear-gradient(180deg, rgba(251,113,133,0.12), rgba(251,113,133,0.06));}
    .key.alt{background:transparent;border:1px solid rgba(255,255,255,0.04)}

    .footer{margin-top:12px;display:flex;justify-content:space-between;align-items:center;font-size:12px;color:var(--muted)}

    @media (max-width:420px){
      .calculator{width:100%;padding:14px}
      .result{font-size:28px}
      button.key{height:52px}
    }
  </style>
</head>
<body>
  <div class="calculator" role="application" aria-label="Attractive Calculator">
    <div class="top-row">
      <div class="brand">
        <div class="logo">AC</div>
        <div class="title"><h1>Attractive Calculator</h1><p>HTML ¬∑ CSS ¬∑ JavaScript</p></div>
      </div>

      <div class="modes">
        <button class="mode-btn" id="themeToggle" title="Toggle theme">üåô</button>
      </div>
    </div>

    <div class="display" id="display">
      <div class="expr" id="expression">0</div>
      <div class="result" id="result">0</div>
    </div>

    <div class="pad" id="pad">
      <button class="key clear" data-action="clear">C</button>
      <button class="key alt" data-action="back">‚å´</button>
      <button class="key alt" data-action="percent">%</button>
      <button class="key op" data-value="/">√∑</button>

      <button class="key" data-value="7">7</button>
      <button class="key" data-value="8">8</button>
      <button class="key" data-value="9">9</button>
      <button class="key op" data-value="*">√ó</button>

      <button class="key" data-value="4">4</button>
      <button class="key" data-value="5">5</button>
      <button class="key" data-value="6">6</button>
      <button class="key op" data-value="-">‚àí</button>

      <button class="key" data-value="1">1</button>
      <button class="key" data-value="2">2</button>
      <button class="key" data-value="3">3</button>
      <button class="key op" data-value="+">+</button>

      <button class="key" data-value="0" style="grid-column:span 2;">0</button>
      <button class="key" data-value=".">.</button>
      <button class="key eq" data-action="equals">=</button>
    </div>

    <div class="footer">
      <div>Tip: You can use keyboard (numbers, + - * / Enter Backspace)</div>
    </div>
  </div>

  <script>
    (function(){
      const exprEl = document.getElementById('expression');
      const resEl = document.getElementById('result');
      const pad = document.getElementById('pad');
      const themeToggle = document.getElementById('themeToggle');

      let expression = '';

      function updateDisplay(){
        exprEl.textContent = expression || '0';
        try{
          const sanitized = expression.replace(/√ó/g,'*').replace(/√∑/g,'/').replace(/[^0-9+\-*/().% ]/g,'');
          if(sanitized.trim() === ''){ resEl.textContent = '0'; return; }
          // handle percent (e.g., 50% -> 0.5 when used as number)
          const evalExpr = sanitized.replace(/(\d+(?:\.\d+)?)%/g, '($1/100)');
          const val = Function('return ' + evalExpr)();
          if(isFinite(val)) resEl.textContent = String(val);
          else resEl.textContent = 'Error';
        }catch(e){ resEl.textContent = '' }
      }

      function pushValue(v){
        // prevent multiple dots in a number
        if(v === '.'){
          // find last token (after operator)
          const tokens = expression.split(/[-+*/]/);
          const last = tokens[tokens.length-1];
          if(last.includes('.')) return;
          if(last === '') expression += '0';
        }
        expression += v;
        updateDisplay();
      }

      pad.addEventListener('click', (e)=>{
        const btn = e.target.closest('button');
        if(!btn) return;
        const v = btn.getAttribute('data-value');
        const action = btn.getAttribute('data-action');
        if(action === 'clear'){
          expression = '';
          updateDisplay();
        }else if(action === 'back'){
          expression = expression.slice(0,-1);
          updateDisplay();
        }else if(action === 'percent'){
          expression += '%'; updateDisplay();
        }else if(action === 'equals'){
          computeResult(true);
        }else if(v){
          pushValue(v);
        }
      });

      function computeResult(commit){
        try{
          const sanitized = expression.replace(/√ó/g,'*').replace(/√∑/g,'/').replace(/[^0-9+\-*/().% ]/g,'');
          const evalExpr = sanitized.replace(/(\d+(?:\.\d+)?)%/g, '($1/100)');
          const val = Function('return ' + evalExpr)();
          if(!isFinite(val) || val === undefined) { resEl.textContent = 'Error'; return; }
          resEl.textContent = String(val);
          if(commit) expression = String(val);
        }catch(e){ resEl.textContent = 'Error' }
      }

      // Keyboard support
      window.addEventListener('keydown', (e)=>{
        if(e.key >= '0' && e.key <= '9') { pushValue(e.key); e.preventDefault(); }
        else if(e.key === '.') { pushValue('.'); e.preventDefault(); }
        else if(['+','-','*','/','(',')'].includes(e.key)){ pushValue(e.key); e.preventDefault(); }
        else if(e.key === 'Enter'){ computeResult(true); e.preventDefault(); }
        else if(e.key === 'Backspace'){ expression = expression.slice(0,-1); updateDisplay(); e.preventDefault(); }
        else if(e.key === '%'){ expression += '%'; updateDisplay(); e.preventDefault(); }
      });

      // Theme toggle (light)
      let light = false;
      themeToggle.addEventListener('click', ()=>{
        light = !light;
        if(light){
          document.documentElement.style.setProperty('--bg','#f5f7fb');
          document.documentElement.style.setProperty('--panel','#ffffff');
          document.documentElement.style.setProperty('--accent','#6d28d9');
          document.documentElement.style.setProperty('--muted','rgba(15,23,42,0.6)');
          document.documentElement.style.setProperty('--glass','rgba(15,23,42,0.02)');
          themeToggle.textContent = '‚òÄÔ∏è';
          document.documentElement.style.color = '#0b1220';
        }else{
          document.documentElement.style.removeProperty('--bg');
          document.documentElement.style.removeProperty('--panel');
          document.documentElement.style.removeProperty('--accent');
          document.documentElement.style.removeProperty('--muted');
          document.documentElement.style.removeProperty('--glass');
          themeToggle.textContent = 'üåô';
          document.documentElement.style.color = '';
        }
      });

      // initialize
      updateDisplay();
    })();
  </script>
</body>
</html>
